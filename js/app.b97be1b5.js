(function(t){var n={};function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(i,a,function(n){return t[n]}.bind(null,a));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/vue-danmaku/",e(e.s=0)})({0:function(t,n,e){t.exports=e("56d7")},"14ef":function(t,n,e){"use strict";e("31d9")},3191:function(t,n,e){(function(n,e){t.exports=e()})(0,(function(){var t=function(){function n(t){return a.appendChild(t.dom),t}function e(t){for(var n=0;n<a.children.length;n++)a.children[n].style.display=n===t?"block":"none";i=t}var i=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",(function(t){t.preventDefault(),e(++i%a.children.length)}),!1);var o=(performance||Date).now(),s=o,r=0,u=n(new t.Panel("FPS","#0ff","#002")),c=n(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=n(new t.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:a,addPanel:n,showPanel:e,begin:function(){o=(performance||Date).now()},end:function(){r++;var t=(performance||Date).now();if(c.update(t-o,200),t>s+1e3&&(u.update(1e3*r/(t-s),100),s=t,r=0,l)){var n=performance.memory;l.update(n.usedJSHeapSize/1048576,n.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:a,setMode:e}};return t.Panel=function(t,n,e){var i=1/0,a=0,o=Math.round,s=o(window.devicePixelRatio||1),r=80*s,u=48*s,c=3*s,l=2*s,d=3*s,f=15*s,h=74*s,m=30*s,p=document.createElement("canvas");p.width=r,p.height=u,p.style.cssText="width:80px;height:48px";var v=p.getContext("2d");return v.font="bold "+9*s+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=e,v.fillRect(0,0,r,u),v.fillStyle=n,v.fillText(t,c,l),v.fillRect(d,f,h,m),v.fillStyle=e,v.globalAlpha=.9,v.fillRect(d,f,h,m),{dom:p,update:function(u,b){i=Math.min(i,u),a=Math.max(a,u),v.fillStyle=e,v.globalAlpha=1,v.fillRect(0,0,r,f),v.fillStyle=n,v.fillText(o(u)+" "+t+" ("+o(i)+"-"+o(a)+")",c,l),v.drawImage(p,d+s,f,h-s,m,d,f,h-s,m),v.fillRect(d+h-s,f,s,m),v.fillStyle=e,v.globalAlpha=.9,v.fillRect(d+h-s,f,s,o((1-u/b)*m))}}},t}))},"31d9":function(t,n,e){},"56d7":function(t,n,e){"use strict";e.r(n);var i=e("8bbf"),a=e.n(i),o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("vue-danmaku",{ref:"danmaku",staticClass:"demo",attrs:{danmus:t.danmus,config:t.config},scopedSlots:t._u([{key:"dm",fn:function(n){var i=n.index,a=n.danmu;return[e("div",{staticClass:"danmu-item"},[e("img",{staticClass:"img",attrs:{src:a.avatar}}),e("span",[t._v(t._s(i)+t._s(a.name)+"：")]),e("span",[t._v(t._s(a.text))])])]}}])},[e("div")]),e("div",{staticClass:"main"},[t._m(0),e("div",{staticClass:"action"},[e("p",[t._v(" 播放： "),e("button",{staticClass:"btn",on:{click:function(n){return t.play("play")}}},[t._v("播放")]),e("button",{staticClass:"btn",on:{click:function(n){return t.play("pause")}}},[t._v("暂停")]),e("button",{staticClass:"btn",on:{click:function(n){return t.play("stop")}}},[t._v("停止")])]),e("p",[t._v(" 模式： "),e("button",{staticClass:"btn",on:{click:function(n){return t.switchSlot(!0)}}},[t._v("弹幕 slot")]),e("button",{staticClass:"btn",on:{click:function(n){return t.switchSlot(!1)}}},[t._v("普通文本")])]),e("p",[t._v(" 显示： "),e("button",{staticClass:"btn",on:{click:function(n){return t.play("show")}}},[t._v("显示")]),e("button",{staticClass:"btn",on:{click:function(n){return t.play("hide")}}},[t._v("隐藏")])]),e("p",[t._v(" 速度： "),e("button",{staticClass:"btn",on:{click:function(n){return t.speedChange(1)}}},[t._v("减速")]),e("button",{staticClass:"btn",on:{click:function(n){return t.speedChange(-1)}}},[t._v("增速")]),e("span",[t._v("当前速度："+t._s(t.config.speed)+"s/屏")])]),e("p",[t._v(" 字号： "),e("button",{staticClass:"btn",attrs:{disabled:t.config.slot},on:{click:function(n){return t.fontChange(-1)}}},[t._v("缩小")]),e("button",{staticClass:"btn",attrs:{disabled:t.config.slot},on:{click:function(n){return t.fontChange(1)}}},[t._v("放大")]),e("span",[t._v("当前字号："+t._s(t.config.fontSize)+"px")])]),e("p",[t._v(" 轨道： "),e("button",{staticClass:"btn",on:{click:function(n){return t.channelChange(-1)}}},[t._v("-1")]),e("button",{staticClass:"btn",on:{click:function(n){return t.channelChange(1)}}},[t._v("+1")]),e("button",{staticClass:"btn",on:{click:function(n){return t.channelChange(-t.config.channels)}}},[t._v("填满")]),e("span",[t._v("当前轨道："+t._s(t.config.channels))])]),e("p",[t._v(" 发送： "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.danmu,expression:"danmu"}],staticClass:"ipt",attrs:{type:"text"},domProps:{value:t.danmu},on:{input:function(n){n.target.composing||(t.danmu=n.target.value)}}}),e("button",{staticClass:"btn",on:{click:t.addDanmu}},[t._v("发送")])]),e("p",[t._v(" 性能： "),e("button",{staticClass:"btn",on:{click:function(n){return t.setPerformance("block")}}},[t._v("显示")]),e("button",{staticClass:"btn",on:{click:function(n){return t.setPerformance("none")}}},[t._v("隐藏")])])])]),e("a",{staticClass:"github-corner",attrs:{href:"https://github.com/hellodigua/vue-danmaku",target:"_blank","aria-label":"View source on Github"}},[e("svg",{staticStyle:{fill:"#151513",color:"#fff",position:"absolute",top:"0",border:"0",right:"0"},attrs:{width:"80",height:"80",viewBox:"0 0 250 250","aria-hidden":"true"}},[e("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),e("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),e("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])],1)},s=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"intro"},[e("h1",[t._v("vue-danmaku")]),e("p",[t._v("基于 Vue.js 的弹幕交互组件")])])}],r=e("3191"),u=e.n(r),c=[{avatar:"https://i.loli.net/2021/01/17/iI5hq9ozPxXNFfy.jpg",name:"美绪",text:"马什么梅？"},{avatar:"https://i.loli.net/2021/01/17/YcPdNkQyAUaTWG8.jpg",name:"博士",text:"马东什么？"},{avatar:"https://i.loli.net/2021/01/17/cPtsFmaJ2OiYZRb.jpg",name:"柚子",text:"什么冬梅？"}],l=["草","高技术力","汤姆逊波纹疾走…啊哒哒哒哒哒哒……","此曲一出，非死即伤","这播放量不应该啊","牛皮！","全  文  背  诵","ohhhhhhh","NICE","草这死亡姿势","日常迫害团长","溜了溜了","火钳刘明","真实","汤姆逊波纹疾走","不  要  停  下  来  啊","泥 给 路 打 油","停下来了","草","完全一致","你怎么还没有被禁赛","6P41波纹疾走!!!","牛逼","草","草","cccccccc","人才不火系列","双厨狂喜","双厨曝炸","火钳留名","火钳留名","牛逼啊","草","草","要素过多","火钳刘明","高技术力suki","bo良ki影觉得很赞","你们的下一句话是名场面","Niiice","太草了","哈哈哈哈","火钳刘明","6p41疾走","袭击妈妈","占戈哥欠走己","又看jojo又玩r6的人恐怕太少了吧","好活当赏","要素过多","动作也太流畅了吧","世界名画","好活，当赏","全程高能","新人都是怪物.jpg","我的人质啊","袭击妈妈锁孔看她","完全不会画画（大嘘）","好活","爆头 2333333","把队友杀了的屑","动作指导:奥尔加","草","要素过多","噗","让你玩手机","6啊","我负责救人质","三厨狂喜","三厨狂喜","万能日语","耶———————格——————————","6P41波纹疾走","“哦”踩点还行","火钳刘明。","哎地唉洗","这枪不是m249啊，等等叫什么来的","火钳刘明","光棍节， 。去过","炸死队友哈哈哈","火钳刘明","火钳刘明","cao","火钳刘明","提前Niiiiiiiice！","火钳刘明","神仙UP","又被爆头了","6p41疾走","好活","人质好好笑啊","不要停下来啊","好活啊！！","6P41波纹疾走 （换成AK是不是更爽）","恭喜你发现宝藏","恭喜你发现宝藏","恭喜你发现宝藏","前方高能","封禁30分钟","火钳刘明","该赏","我靠，就冲着高帧数，投币了","不 要 停 下 来 啊（指你给路）","卧槽 无情","草","ADS草","世界线收束","火钳刘明","人质：给我把抢我跟他拼了","小车灵魂","卧槽这帧数","jojoの奇妙转场","niiiiiiice","好活","要素过多","6p41","TK*3移除对战","这场景布置有弹丸那味儿了","草","草","不要让战斗停下来","火钳留名","炸死俩盾哈哈","太草了，","万能日语","伪渲染(确信)","要素过多","火钳刘明","卧槽","炸死队友","危","这才是真正的高技术力","高技术力suki","火钳刘明","欺负我不懂日语系列","我打我自己","帧数爆炸","危","危","要素过多","巨真实这小车","牛逼","帧数高的吓人","5v5→3v3","我都是俄式救援","niiiiiiiiiiiice","别啊！","尼给路嗒呦","目测会火","双厨狂喜","人质已解救（脱）","哈哈哈哈哈","要素过多","nb","杀了两个队友不就被踢出去了吗","这是新人？","没毛病","一甲fuze","要素过多","大————头————","人————质————","这是组长吗？","不是M249，是PKP","卡其脱离太","等等JOJO是你？","我就是又看JOJO又玩r6","二乔？？？？？？","这也太流畅了吧","这tm能出番了这帧数和技术","kpm波纹疾走","大制作","太草了","耶——格——","高技术力","精神小车","左轮庸医","袭击人质，锁孔看他","奈~~斯 屑队友被杀✓","惨  盾兵  惨","打敌人误伤不算","不要停下来啊! (指解救人质)","嘴巴被贴胶还能说话的人质是鉴","哈哈哈哈哈哈哈哈哈","一局11杀","二乔同款姿势 哈哈","耶格！","看","鉴作无误","双出狂喜","为什么不是中文","经典咚咚咚………三声雷，带你飞","要素过多","jojo","三厨狂喜","我也是又看又玩","我都听到lisalisa了doge","你给路打油","确实质量很高啊","NICE","银魂？","火钳刘明","我就是又看jojo又玩R6（1631小时）的，你有什么事吗？","哟西哟西","要素过多","我也是看JOJO，玩r6","nokk","800小时r6加二刷jojo在此","好活","jojo","fuze the hostage","不要停下来！！！！！","pkppkp波纹疾走","新人都是怪物吗？","23333333","我先来，首页通知书","咚咚咚放这里。。。","火钳刘明","火钳刘明","火钳刘明","队友都炸","nice","哈哈哈哈","人质:危！","危","火钳刘明","人质  卒","你币有了","打投组","恭喜首頁通知書！","要素溢出","HOSTAGE KIA","233","是无托版的PKP","666","hostage KIA","tk哈哈哈","要素过多","这个肌肉我可以惹","6的飞起","jo风","混入了奇怪的东西","草","袭击妈妈，锁孔看她","哈哈哈哈哈哈","，","草","牛逼","高技术力啊","opp","X","组长！","草（中日双语）","哈哈哈哈哈哈","-500",".","看封面识内容系列","草","首页通知书","要素过多","但是不会画画","草","不要停下来啊！","梅开三度","四回啊四回","高帧好评","人质已解脱","草","强","好活！","好流畅","草","666","好活儿当赏","新人都是怪物系列","高技术力","niiiiiiiiiiiiiiice","人质危","哈哈哈哈","带制作，三连了","鉴作","咚咚咚","咚咚咚咚棒棒棒棒","要素过多","不应该是打中耳机吗","高技术力","完了","彩虹六号牛批","口罩都有荒木线，佛了","哈哈哈","要素爆炸","高技术力","cao caocaocaocao","哈哈哈哈哈哈哈","等等，2乔这里说的是30分钟","首页通知书","海     岸     线","pkp波纹疾走","耶————————格————————","人 质 凶 手 -500","队友：WDNMD","jojo？？？","点进来之前我以为是fuze饮料。。","要素过多","绝了","要素过多","灭 霸","新人都是魔鬼","帧数爆炸","Cluster Charge activated！","要素过多","Hostage KIA，Mission failed","人质已解脱。。。","开 幕 雷 击","哈哈哈哈","ADS草死了","+0","牛批牛批","拜见大神","阿虚","这帧数，感觉在看动漫","卡其脱离太","双厨狂喜","问问","不要停下来啊！！！！！","h","不要停下来啊","要真30分钟都不用结束回合了，都开始第二局游戏了","这也太强了","。。。。。。。。。。。。","hoho","要素过多","哈哈哈哈哈哈哈哈哈哈哈哈哈哈","哈哈哈哈哈哈哈哈哈哈",".00","哈哈","万能的日语","首页通知书","我卡了？","hhhhh","大盾闪盾好惨","哈哈哈哈哈哈哈哈哈","草","要素太多受不了哈哈哈哈哈哈哈","火钳刘明","首页通知书","lisalisa","这是什么蛇皮操作，看不懂","敌 我 不 分","草","666","哈哈哈哈啊哈哈哈","完全一致","要素过多","你又双叒叕发现了新的宝藏","火钳刘明","2333","高  技  术  力","三梗合一","四梗合一","火钳刘明","杀2个队友不是直接飞了吗","首页通知书","海岸线","是延迟","好活当赏","这个我遇到过，fuze就是我，人质敌人队友都被我杀掉了，被老外骂并被踢了","草素过多","人质——  再不能起","必须三联","开始吟唱","不要停下来啊","草","？？？？？？？？？？？？？？？？？","tab+shift","帧数高的和动画一样","wwwwwwwwwwww","好强","23333333","好活当赏","此曲一出","要素过载","火钳刘明","要素过载","好活！！！！","开始吟唱","我听得懂咋办，在线等，很急","哇哇哇好高清",".","医 学 奇 迹","jo里jo气的","jojo画风","哈哈哈哈哈哈","俄式反恐","别拦我，老子把3个ADS都丢他脸上","-500","万 能 日 语","666","人质杀手","做的真的棒。","我NM笑疯","双厨狂喜","玛撒卡！这是袭击妈妈配音？","nice","jojo!","JO小鬼来力","真实","我又玩R6又看JOJO","完  全  不  会  画  画","秀儿","是系统自动踢人的，老外来不及踢你","6p41波纹疾走","火钳刘明","lisalisa？？？？？","盾——兵——（悲）","就是没有汤姆逊，汤姆逊波纹疾走！！","要素过多","。。。。？？","组长你怎么了组长","UP:我 完 全 不 会 画 画","再来亿遍","泥给路带呦～","哈哈哈哈哈哈哈哈哈","哈哈哈哈哈哈哈哈哈","火钳刘明"],d=new u.a;function f(){d.begin(),d.end(),requestAnimationFrame(f)}d.showPanel(0),document.body.appendChild(d.dom),requestAnimationFrame(f);var h={name:"App",components:{},data:function(){return{danmus:l,config:{channels:0,slot:!1,loop:!0,speed:10,fontSize:20,top:10,right:0,debounce:100},danmu:""}},created:function(){screen.width<750&&(this.config.speed=5,this.config.channels=0)},mounted:function(){var t=this;window.onresize=function(){return t.resizeHandler()}},beforeDestroy:function(){window.onresize=null},methods:{play:function(t){switch(t){case"play":this.$refs.danmaku.play();break;case"pause":this.$refs.danmaku.pause();break;case"stop":this.$refs.danmaku.stop();break;case"show":this.$refs.danmaku.show();break;case"hide":this.$refs.danmaku.hide();break;case"reset":this.$refs.danmaku.reset();break;default:break}},switchSlot:function(t){var n=this;this.config.slot=t,this.danmus=t?c:l,setTimeout((function(){n.$refs.danmaku.reset(),n.$refs.danmaku.play()}))},setPerformance:function(t){d.dom.style.display=t},speedChange:function(t){1===this.config.speed&&-1===t||(this.config.speed+=t,this.$refs.danmaku.reset())},fontChange:function(t){this.config.fontSize+=t,this.$refs.danmaku.reset()},channelChange:function(t){(this.config.channels||-1!==t)&&(this.config.channels+=t,this.$refs.danmaku.setChannels(this.config.channels))},resizeHandler:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.$refs.danmaku.resize()}),500)},addDanmu:function(){if(this.danmu){var t=this.config.slot?{avatar:"https://i.loli.net/2021/01/17/xpwbm3jKytfaNOD.jpg",name:"你",text:this.danmu}:this.danmu;this.$refs.danmaku.add(t),this.danmu=""}}}},m=h;e("5c0b");function p(t,n,e,i,a,o,s,r){var u,c="function"===typeof t?t.options:t;if(n&&(c.render=n,c.staticRenderFns=e,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),s?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=u):a&&(u=r?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,n){return u.call(n),l(t,n)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:c}}var v=p(m,o,s,!1,null,null,null),b=v.exports,g=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"danmaku",staticClass:"vue-danmaku"},[e("div",{ref:"danmus",class:["danmus",{show:!t.hidden},{paused:t.paused}]}),t._t("default")],2)},y=[];function k(t){return k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function C(t,n){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=x(t))||n&&t&&"number"===typeof t.length){e&&(t=e);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==e.return||e.return()}finally{if(r)throw o}}}}function _(t){return j(t)||S(t)||x(t)||w()}function w(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(t,n){if(t){if("string"===typeof t)return $(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?$(t,n):void 0}}function S(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function j(t){if(Array.isArray(t))return $(t)}function $(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}var P={props:{danmus:{type:Array,required:!0},config:{type:Object,default:function(){return{}}}},data:function(){return{container:null,isActive:!1,timer:null,$danmaku:null,$danmus:null,danmaku:{danmus:[],autoplay:!0,width:0,channels:0,loop:!1,slot:!1,debounce:50,randomChannel:!1},danmu:{fontSize:18,height:0,speed:10,top:4,right:2},index:0,hidden:!1,paused:!1,danChannel:{}}},computed:{},watch:{},created:function(){},mounted:function(){this.init()},beforeDestroy:function(){this.clearTimer()},methods:{init:function(){this.initCore(),this.initConfig(),this.danmaku.autoplay&&this.danmaku.danmus.length&&this.play()},initCore:function(){this.$danmaku=this.$refs.danmaku,this.$danmus=this.$refs.danmus,this.danmaku.width=this.$danmaku.offsetWidth,this.danmaku.height=this.$danmaku.offsetHeight},initConfig:function(){var t=this.config,n=t.autoplay,e=void 0===n||n,i=t.channels,a=void 0===i?0:i,o=t.loop,s=void 0!==o&&o,r=t.slot,u=void 0!==r&&r,c=t.debounce,l=void 0===c?50:c,d=t.speed,f=void 0===d?10:d,h=t.fontSize,m=void 0===h?18:h,p=t.top,v=void 0===p?4:p,b=t.right,g=void 0===b?0:b,y=t.randomChannel,k=void 0!==y&&y;this.danmaku.danmus=_(this.danmus),this.danmaku.autoplay=Boolean(e),this.danmaku.channels=Number(a),this.danmaku.loop=Boolean(s),this.danmaku.slot=Boolean(u),this.danmaku.debounce=Number(l),this.danmaku.randomChannel=Boolean(k),this.danmu.speed=Number(f),this.danmu.fontSize=Number(m),this.danmu.top=Number(v),this.danmu.right=Number(g)},play:function(){this.timer||this.draw(),this.paused&&(this.paused=!1)},draw:function(){var t=this;this.$nextTick((function(){t.timer=setInterval((function(){t.paused||(t.index>t.danmaku.danmus.length-1?t.danmaku.loop?t.insert():t.clear():t.insert())}),t.danmaku.debounce)}))},insert:function(){var t=this,n=this.danmaku.loop?this.index%this.danmaku.danmus.length:this.index,e=document.createElement("div");this.danmaku.slot?e=this.getSlotComponent(n).$el:(e.innerHTML=this.danmaku.danmus[n],e.style.fontSize="".concat(this.danmu.fontSize,"px"),e.style.lineHeight="".concat(this.danmu.fontSize,"px")),e.classList.add("dm"),e.setAttribute("index",this.index),this.$danmus.appendChild(e),this.$nextTick((function(){t.danmu.height&&t.danmaku.channels||(t.danmu.height=e.offsetHeight,t.danmaku.channels||(t.danmaku.channels=Math.floor(t.danmaku.height/t.danmu.height)));var n=t.getChannelIndex(e);if(n>=0){var i=e.offsetWidth,a=t.danmu.height;e.classList.add("move"),e.style.animationDuration="".concat(t.danmu.speed,"s"),e.style.top=n*(a+t.danmu.top)+"px",e.style.width=i+t.danmu.right+"px",e.style.transform="translateX(-".concat(t.danmaku.width,"px)"),e.addEventListener("animationend",(function(){t.$danmus.removeChild(e)})),e.classList.length>0&&t.index++}else e.classList.length>0&&t.$danmus.removeChild(e)}))},getSlotComponent:function(t){var n=this,e=a.a.extend({props:{danmu:[String,Object],index:Number},render:function(t){return t("div",[n.$scopedSlots.dm({danmu:this.danmu,index:this.index})])}}),i=new e({propsData:{danmu:this.danmaku.danmus[t],index:t}}).$mount(document.createElement("div"));return i},getChannelIndex:function(t){var n=this,e=_(Array(this.danmaku.channels).keys());this.danmaku.randomChannel&&(e=e.sort((function(){return.5-Math.random()})));var i,a=C(e);try{var o=function(){var e=i.value,a=n.danChannel[e];if(!a||!a.length)return n.danChannel[e]=[t],t.addEventListener("animationend",(function(){return n.danChannel[e].splice(0,1)})),{v:e%n.danmaku.channels};for(var o=0;o<a.length;o++){var s=n.getDanRight(a[o])-10;if(s<=.88*(t.offsetWidth-a[o].offsetWidth)||s<=0)break;if(o===a.length-1)return n.danChannel[e].push(t),t.addEventListener("animationend",(function(){return n.danChannel[e].splice(0,1)})),{v:e%n.danmaku.channels}}};for(a.s();!(i=a.n()).done;){var s=o();if("object"===k(s))return s.v}}catch(r){a.e(r)}finally{a.f()}return-1},getDanRight:function(t){var n=t.offsetWidth||parseInt(t.style.width),e=t.getBoundingClientRect().right||this.$danmus.getBoundingClientRect().right+n;return this.$danmus.getBoundingClientRect().right-e},clearTimer:function(){clearInterval(this.timer),this.timer=null},clear:function(){this.clearTimer(),this.index=0},reset:function(){this.$danmaku=null,this.$danmus=null,this.danmu.height=0,this.init()},stop:function(){this.danChannel={},this.$refs.danmus.innerHTML="",this.paused=!0,this.hidden=!1,this.clear()},pause:function(){this.paused=!0},add:function(t){var n=this.index%this.danmaku.danmus.length;this.danmaku.danmus.splice(n,0,t)},setChannels:function(t){this.danmaku.channels=t},getPlayState:function(){return!this.paused},show:function(){this.hidden=!1},hide:function(){this.hidden=!0},resize:function(){this.initCore();for(var t=this.$danmaku.getElementsByClassName("dm"),n=0;n<t.length;n++)t[n].style.transform="translateX(-".concat(this.danmaku.width,"px)")}}},A=P,O=(e("14ef"),p(A,g,y,!1,null,null,null)),T=O.exports;T.install=function(t){t.component("vueDanmaku",T)},"undefined"!==typeof window&&window.Vue&&window.Vue.use(T);var z=T;a.a.use(z),new a.a({el:"#app",render:function(t){return t(b)}})},"5c0b":function(t,n,e){"use strict";e("9c0c")},"8bbf":function(t,n){t.exports=Vue},"9c0c":function(t,n,e){}});
//# sourceMappingURL=app.b97be1b5.js.map